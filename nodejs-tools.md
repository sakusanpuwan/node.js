## .env

`npm install dotenv --save` - Installs the dotenv package and saves it as a dependency in the package.json file.

`dotenv` - A zero-dependency module that loads environment variables from a .env file into process.env. It is used to manage configuration settings and sensitive information in Node.js applications.

```
// .env
SECRET_KEY = "qwerty"
```

```js
import dotenv from "dotenv";

const result = dotenv.config();
if (result.error) {
  console.error("⚠️ Could not load .env file", result.error);
  process.exit(1);
}

console.log(`Environment variable: ${process.env.SECRET_KEY}`);
```

**NOTE** - The .env file should not be committed to version control (e.g., Git) as it may contain sensitive information. It is recommended to add the .env file to the `.gitignore` file to prevent it from being tracked by Git.

Explicit `dotenv.config()` calls ensure your .env loads at runtime, from the filesystem, not from inside the binary. This is important for security and flexibility, especially in production environments where you may not want to expose sensitive information in your codebase.

## nodemon

`npm install nodemon --save-dev` - Installs the nodemon package as a development dependency in the package.json file.

`nodemon` - A utility that monitors changes in the source code and automatically restarts the Node.js application when changes are detected. It is useful for development purposes to avoid manually restarting the server after every change.

```json
{
  "scripts": {
    "start": "node index.js", // Starts the application using Node.js
    "start:dev": "nodemon index.js" // Starts the application in development mode using nodemon
  }
}
```

## Jest

`npm install jest` - Installs the Jest testing framework as a dependency in the package.json file.

`jest` - A JavaScript testing framework that allows developers to write and run tests for their code. It provides features such as test runners, assertions, and mocking.

```json
{
  "scripts": {
    "test": "jest", // Runs all tests in the project
    "test:watch": "jest --watch", // Runs tests in watch mode, re-running tests when files change
    "test:coverage": "jest --coverage", // Generates test coverage reports
    "test:verbose": "jest --verbose" // Runs tests with detailed output
  }
}
```

`npm install babel-jest @babel/core @babel/preset-env` - Installs Babel and its preset for transforming modern JavaScript code into a version compatible with older environments.
`babel-jest` - A Jest transformer that allows Jest to process JavaScript files using Babel.

`@babel/core` - The core library of Babel, which is responsible for transforming JavaScript code.

`@babel/preset-env` - A preset that allows you to use the latest JavaScript features by automatically determining the Babel plugins and polyfills needed based on your target environment.

```
// .babelrc
{
  "presets": ["@babel/preset-env"]
}
```

`npm run test:coverage` - Runs Jest with coverage reporting enabled, generating a coverage report for the tests.

`npm run test <test_name>` - Runs a specific test file or test case by name.

To run run myFunction.test.js, use the following command: `npm run test myFunction`

`./coverage/lcov-report/index.html` - The coverage report generated by Jest, which can be opened in a web browser to view detailed coverage information.

### `describe` block

Groups related tests for a function/module.

```js
describe("myFunction", () => {
  test("does something", () => {
    // your test here
  });
});
```

### `beforeEach` block

Runs a function before each test in the `describe` block.

```js
beforeEach(() => {
  // setup code here
});
```

### `test()` or `it` block

```js
test("adds 1 + 2 to equal 3", () => {
  expect(1 + 2).toBe(3);
});
```

### `expect()` function

The `expect` function is used to create an assertion in Jest tests. It takes a value as an argument and returns an object with various matchers that can be used to assert conditions about that value.

```js
expect(value).toBe(expectedValue); // Checks if value is equal to expectedValue
```

| Matcher                          | Purpose                          |
| -------------------------------- | -------------------------------- |
| `toBe(value)`                    | Checks strict equality (`===`)   |
| `toEqual(obj)`                   | Deep equality for objects/arrays |
| `toBeTruthy()` / `toBeFalsy()`   | Checks truthiness                |
| `toBeNull()` / `toBeUndefined()` | Null / undefined checks          |
| `toContain(item)`                | Array/string contains            |
| `toThrow(error?)`                | Function throws error            |
| `resolves.toEqual()`             | Async success result             |
| `rejects.toThrow()`              | Async error thrown               |
| `.not` matcher                   | Negates the assertion            |

### Stubbing

Stubbing is a technique used in testing to replace a function or method with a fake implementation. It allows you to control the behavior of the function being tested and isolate it from its dependencies.

```js
import db from "./db.js";

jest.mock("./db.js", () => ({
  save: jest.fn().mockResolvedValue("OK"),
}));
```

### Mocking

Mocking is a technique used in testing to create fake implementations of functions or objects. It allows you to isolate the code being tested and control its behavior.

```js
const mockFunction = jest.fn(); // Creates a mock function
mockFunction.mockReturnValue("mocked value"); // Sets the return value of the mock function
mockFunction("arg1", "arg2"); // Calls the mock function with arguments
expect(mockFunction).toHaveBeenCalledWith("arg1", "arg2"); // Asserts that the mock function was called with specific arguments
```

`mockFunction.mock.calls` - Returns an array of all calls made to the mock function, including the arguments passed to each call.

### Spying

Spying is a technique used to monitor the behavior of functions or methods without modifying their implementation. It allows you to track how many times a function was called, what arguments were passed, and what values were returned.

```js
import * as math from "./math.js";

jest.spyOn(math, "add");
math.add(2, 3);
expect(math.add).toHaveBeenCalledWith(2, 3);
expect(math.add).toHaveBeenCalledTimes(1); // Asserts that the add function was called once
```
